<Project Sdk="Microsoft.NET.Sdk">
  
  <PropertyGroup>
    <OutputType>WinExe</OutputType>
    <TargetFramework>net10.0-windows7.0</TargetFramework>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ApplicationManifest>../app.manifest</ApplicationManifest>
  </PropertyGroup>
  
  <ItemGroup>
    <PackageReference Include="DotnetRuntimeBootstrapper">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\TouchChanX.Win32\TouchChanX.Win32.csproj" />
    <ProjectReference Include="..\TouchChanX.WPF\TouchChanX.WPF.csproj" />
  </ItemGroup>
  
  <ItemGroup>
    <RuntimeHostConfigurationOption Include="Switch.System.Windows.Input.Stylus.EnablePointerSupport" Value="true" />
    <RuntimeHostConfigurationOption Include="Switch.System.Windows.Media.EnableHardwareAccelerationInRdp" Value="true" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="EmbeddedResource.resx">
      <Generator>MSBuild:Compile</Generator>
    </EmbeddedResource>
  </ItemGroup>

  <!-- 因 Microsoft.Win32.SystemEvents 传递依赖引起的多余的输出 -->
  <Target Name="CleanupRuntimes" AfterTargets="Build">
    <Message Text="$(ProjectName) 正在清理冗余的 runtimes 目录..." Importance="low" />
    <RemoveDir Directories="$(OutputPath)runtimes" />
  </Target>
</Project>
